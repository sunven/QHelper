# QHelper 实施工作流计划

**文档版本：** 1.0
**日期：** 2026-01-28
**状态：** 工作流计划完成

---

## 工作流概述

本文档基于需求规格说明和系统架构设计，生成详细的分阶段实施计划。

### 实施策略

- **策略模式：** 敏捷迭代 + 持续交付
- **开发节奏：** 2 周一个冲刺（Sprint）
- **质量保证：** 每个阶段包含测试和验证
- **依赖管理：** 基础设施优先，新工具依赖通用组件

---

## 阶段 1：基础设施与质量（第 1-4 周）

### 目标

建立稳固的开发基础设施，修复已知问题，确保代码质量。

### Sprint 1.1：测试框架（第 1 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-1.1.1 | 安装 Vitest + React Testing Library | 无 | pnpm test 可运行 |
| WF-1.1.2 | 创建 vitest.config.ts 配置 | WF-1.1.1 | jsdom 环境配置完成 |
| WF-1.1.3 | 创建 tests/setup.ts Mock Chrome API | WF-1.1.2 | chrome API mock 可用 |
| WF-1.1.4 | 为 Button 组件编写测试 | WF-1.1.3 | 测试通过 |
| WF-1.1.5 | 为 Input 组件编写测试 | WF-1.1.3 | 测试通过 |
| WF-1.1.6 | 为 Card 组件编写测试 | WF-1.1.3 | 测试通过 |

#### 文件创建

```
新增文件：
├── vitest.config.ts
├── tests/
│   ├── setup.ts
│   └── unit/
│       └── components/ui/
│           ├── button.test.tsx
│           ├── input.test.tsx
│           └── card.test.tsx
```

#### 验收标准

- [ ] `pnpm test` 运行无错误
- [ ] `pnpm test:coverage` 生成覆盖率报告
- [ ] 核心 UI 组件有基础测试

---

### Sprint 1.2：类型定义与常量（第 1-2 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-1.2.1 | 创建 types/ 目录结构 | 无 | 目录创建完成 |
| WF-1.2.2 | 定义 types/tool.ts | WF-1.2.1 | ToolMetadata 类型导出 |
| WF-1.2.3 | 定义 types/storage.ts | WF-1.2.1 | QHelperStorage 类型导出 |
| WF-1.2.4 | 定义 types/ai.ts | WF-1.2.1 | AIProvider 类型导出 |
| WF-1.2.5 | 创建 types/index.ts 统一导出 | WF-1.2.1 | 所有类型可从 @/types 导入 |
| WF-1.2.6 | 创建 constants/ 目录 | 无 | 目录创建完成 |
| WF-1.2.7 | 定义 constants/tools.ts | WF-1.2.6 | TOOL_CATEGORIES 导出 |
| WF-1.2.8 | 定义 constants/storage.ts | WF-1.2.6 | STORAGE_KEYS 导出 |

#### 文件结构

```
新增目录：
├── types/
│   ├── tool.ts
│   ├── storage.ts
│   ├── ai.ts
│   └── index.ts
└── constants/
    ├── tools.ts
    └── storage.ts
```

#### 验收标准

- [ ] 类型定义无 TypeScript 错误
- [ ] 常量可正确导入使用

---

### Sprint 1.3：状态管理增强（第 2 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-1.3.1 | 创建 hooks/useToolState.ts | WF-1.2.3 | Hook 可正常工作 |
| WF-1.3.2 | 创建 hooks/useToolHistory.ts | WF-1.3.1 | 历史记录功能正常 |
| WF-1.3.3 | 创建 hooks/useToolPreferences.ts | WF-1.3.1 | 偏好设置功能正常 |
| WF-1.3.4 | 创建 hooks/useGlobalSettings.ts | WF-1.3.1 | 全局设置功能正常 |
| WF-1.3.5 | 为 useToolState 编写测试 | WF-1.3.1 | 测试通过 |
| WF-1.3.6 | 为 useToolHistory 编写测试 | WF-1.3.2 | 测试通过 |

#### 验收标准

- [ ] 所有 hooks 可以正确读写 chrome.storage
- [ ] 数据变更自动同步到 storage
- [ ] 测试覆盖率 > 80%

---

### Sprint 1.4：工具注册系统（第 2-3 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-1.4.1 | 创建 lib/tools/metadata.ts | WF-1.2.2 | ToolMetadata 接口定义完成 |
| WF-1.4.2 | 创建 lib/tools/registry.ts | WF-1.4.1 | ToolRegistry 类实现 |
| WF-1.4.3 | 创建 lib/tools/categories.ts | WF-1.4.1 | 工具类别定义 |
| WF-1.4.4 | 创建 lib/tools/discovery.ts | WF-1.4.2 | 自动发现功能 |
| WF-1.4.5 | 为 toolRegistry 编写测试 | WF-1.4.2 | 测试通过 |
| WF-1.4.6 | 重构 popup 使用 toolRegistry | WF-1.4.5 | 弹窗使用注册表 |

#### 验收标准

- [ ] toolRegistry 可以注册和获取工具
- [ ] 按分类和搜索功能正常
- [ ] 弹窗不再硬编码工具列表

---

### Sprint 1.5：错误处理系统（第 3 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-1.5.1 | 创建 components/tool/ErrorBoundary.tsx | 无 | 错误边界组件实现 |
| WF-1.5.2 | 创建 components/tool/ToolWrapper.tsx | WF-1.5.1 | 包装器组件实现 |
| WF-1.5.3 | 创建 middleware/errorHandler.ts | WF-1.5.1 | 错误处理中间件 |
| WF-1.5.4 | 为 ErrorBoundary 编写测试 | WF-1.5.1 | 测试通过 |
| WF-1.5.5 | 为所有现有工具添加 ErrorBoundary | WF-1.5.4 | 每个工具有错误边界 |

#### 验收标准

- [ ] 错误边界可以捕获组件错误
- [ ] 错误信息记录到 chrome.storage
- [ ] 所有工具都被错误边界包裹

---

### Sprint 1.6：Bug 修复（第 3-4 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-1.6.1 | 安装 crypto-js 依赖 | 无 | pnpm add crypto-js |
| WF-1.6.2 | 修复 convert 工具的 MD5 实现 | WF-1.6.1 | MD5 编码正常工作 |
| WF-1.6.3 | 为 MD5 修复编写测试 | WF-1.6.2 | 测试通过 |
| WF-1.6.4 | 安装 diff 库（diff 库或 similar） | 无 | 依赖安装 |
| WF-1.6.5 | 实现 JSON 工具的 diff 功能 | WF-1.6.4 | Diff 视觉对比正常 |
| WF-1.6.6 | 为 diff 功能编写测试 | WF-1.6.5 | 测试通过 |
| WF-1.6.7 | 为 JSON 工具添加历史持久化 | WF-1.3.2 | 历史保存到 storage |

#### 验收标准

- [ ] MD5 编码无错误
- [ ] JSON diff 可以显示差异
- [ ] JSON 工具历史持久化

---

### Sprint 1.7：标准布局组件（第 4 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-1.7.1 | 创建 components/tool/ToolLayout.tsx | WF-1.5.1 | 标准布局组件 |
| WF-1.7.2 | 创建 components/tool/ToolHeader.tsx | WF-1.7.1 | 头部组件 |
| WF-1.7.3 | 创建 components/tool/InputOutput.tsx | WF-1.7.1 | 输入输出组件 |
| WF-1.7.4 | 创建 components/tool/ActionButton.tsx | WF-1.7.1 | 操作按钮组件 |
| WF-1.7.5 | 创建 components/tool/HistoryPanel.tsx | WF-1.3.2 | 历史面板组件 |
| WF-1.7.6 | 创建 components/tool/LoadingSpinner.tsx | WF-1.7.1 | 加载指示器 |
| WF-1.7.7 | 为所有布局组件编写测试 | WF-1.7.1 | 测试通过 |

#### 验收标准

- [ ] 所有组件可以正常渲染
- [ ] 组件支持通过 props 自定义
- [ ] 测试覆盖率 > 70%

---

### Sprint 1.8：存储抽象层（第 4 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-1.8.1 | 创建 lib/storage/schema.ts | WF-1.2.3 | 存储模式定义 |
| WF-1.8.2 | 创建 lib/storage/encryption.ts | 无 | 加密解密函数 |
| WF-1.8.3 | 创建 lib/storage/migrations.ts | WF-1.8.1 | 数据迁移函数 |
| WF-1.8.4 | 为加密函数编写测试 | WF-1.8.2 | 测试通过 |
| WF-1.8.5 | 更新 lib/chrome/storage.ts 支持加密 | WF-1.8.2 | API 密钥加密存储 |

#### 验收标准

- [ ] 存储模式 TypeScript 类型正确
- [ ] 加密解密功能正常
- [ ] 敏感数据加密存储

---

### 阶段 1 检查点

#### 质量标准

- [ ] 测试覆盖率 > 70%
- [ ] 所有 TypeScript 类型无错误
- [ ] Biome lint 无警告
- [ ] 已知 Bug 全部修复

#### 交付物

- [ ] 测试框架配置完成
- [ ] 状态管理系统可用
- [ ] 工具注册系统可用
- [ ] 错误处理系统可用
- [ ] 标准布局组件库
- [ ] Bug 修复完成

---

## 阶段 2：安全与加密工具（第 5-8 周）

### 目标

开发 6 个安全与加密相关工具，使用标准布局组件。

### Sprint 2.1：JWT 解码器（第 5 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-2.1.1 | 创建 entrypoints/tools/jwt/ 目录 | 无 | 目录结构 |
| WF-2.1.2 | 创建 jwt/tool.meta.ts | WF-1.4.1 | 工具元数据 |
| WF-2.1.3 | 创建 jwt/index.html | 无 | HTML shell |
| WF-2.1.4 | 创建 jwt/index.tsx 使用 ToolLayout | WF-1.7.1 | 主组件 |
| WF-2.1.5 | 实现 JWT 解码功能 | WF-2.1.4 | 解码正常 |
| WF-2.1.6 | 添加历史记录 | WF-1.3.2 | 历史功能 |
| WF-2.1.7 | 编写测试 | WF-2.1.5 | 测试通过 |

#### 验收标准

- [ ] JWT 可以正确解码
- [ ] 显示 Header、Payload、签名
- [ ] 验证签名格式（不验证密钥）
- [ ] 历史记录正常

---

### Sprint 2.2：哈希生成器（第 5-6 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-2.2.1 | 创建 entrypoints/tools/hash/ 目录 | 无 | 目录结构 |
| WF-2.2.2 | 创建 hash/tool.meta.ts | WF-1.4.1 | 工具元数据 |
| WF-2.2.3 | 创建 lib/crypto/hash.ts | 无 | 哈希函数封装 |
| WF-2.2.4 | 实现 hash/index.tsx | WF-1.7.1 | 主组件 |
| WF-2.2.5 | 支持 SHA-1、SHA-256、SHA-512 | WF-2.2.3 | 哈希功能正常 |
| WF-2.2.6 | 添加 bcrypt 支持（可选） | WF-2.2.3 | bcrypt 功能 |
| WF-2.2.7 | 添加历史记录 | WF-1.3.2 | 历史功能 |
| WF-2.2.8 | 编写测试 | WF-2.2.5 | 测试通过 |

#### 验收标准

- [ ] 支持多种哈希算法
- [ ] 输入文本输出哈希值
- [ ] 支持文件哈希（可选）
- [ ] 一键复制结果

---

### Sprint 2.3：二维码生成器（第 6 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-2.3.1 | 安装 qrcode.react | 无 | pnpm add qrcode.react |
| WF-2.3.2 | 创建 entrypoints/tools/qrcode/ 目录 | 无 | 目录结构 |
| WF-2.3.3 | 创建 qrcode/tool.meta.ts | WF-1.4.1 | 工具元数据 |
| WF-2.3.4 | 实现 qrcode/index.tsx | WF-1.7.1 | 主组件 |
| WF-2.3.5 | 输入文本生成二维码 | WF-2.3.1 | 二维码生成 |
| WF-2.3.6 | 支持下载二维码图片 | WF-2.3.5 | 下载功能 |
| WF-2.3.7 | 添加历史记录 | WF-1.3.2 | 历史功能 |
| WF-2.3.8 | 编写测试 | WF-2.3.5 | 测试通过 |

#### 验收标准

- [ ] 二维码实时生成
- [ ] 支持自定义大小和颜色
- [ ] 可下载 PNG 格式

---

### Sprint 2.4：二维码阅读器（第 6-7 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-2.4.1 | 安装 jsQR | 无 | pnpm add jsqr |
| WF-2.4.2 | 创建 entrypoints/tools/qrcode-reader/ 目录 | 无 | 目录结构 |
| WF-2.4.3 | 创建 qrcode-reader/tool.meta.ts | WF-1.4.1 | 工具元数据 |
| WF-2.4.4 | 实现 qrcode-reader/index.tsx | WF-1.7.1 | 主组件 |
| WF-2.4.5 | 支持拖拽上传图片 | WF-2.4.4 | 拖拽功能 |
| WF-2.4.6 | 支持粘贴图片 | WF-2.4.4 | 粘贴功能 |
| WF-2.4.7 | 解析二维码内容 | WF-2.4.1 | 解析功能 |
| WF-2.4.8 | 编写测试 | WF-2.4.7 | 测试通过 |

#### 验收标准

- [ ] 图片上传解析
- [ ] 粘贴图片解析
- [ ] 显示解析结果
- [ ] 一键复制结果

---

### Sprint 2.5：UUID/GUID 工具（第 7 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-2.5.1 | 创建 entrypoints/tools/uuid/ 目录 | 无 | 目录结构 |
| WF-2.5.2 | 创建 uuid/tool.meta.ts | WF-1.4.1 | 工具元数据 |
| WF-2.5.3 | 实现 uuid/index.tsx | WF-1.7.1 | 主组件 |
| WF-2.5.4 | 生成 UUID v4 | 无 | 使用 crypto.randomUUID |
| WF-2.5.5 | 验证 UUID 格式 | WF-2.5.4 | 验证功能 |
| WF-2.5.6 | 格式化 UUID（大小写、连字符） | WF-2.5.4 | 格式化功能 |
| WF-2.5.7 | 批量生成 | WF-2.5.4 | 批量功能 |
| WF-2.5.8 | 编写测试 | WF-2.5.4 | 测试通过 |

#### 验收标准

- [ ] 单个/批量生成
- [ ] 格式验证
- [ ] 格式化选项
- [ ] 一键复制

---

### Sprint 2.6：密码生成器（第 7-8 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-2.6.1 | 创建 entrypoints/tools/password/ 目录 | 无 | 目录结构 |
| WF-2.6.2 | 创建 password/tool.meta.ts | WF-1.4.1 | 工具元数据 |
| WF-2.6.3 | 实现 password/index.tsx | WF-1.7.1 | 主组件 |
| WF-2.6.4 | 可配置长度 | WF-2.6.3 | 长度滑块 |
| WF-2.6.5 | 可选字符集（大小写、数字、符号） | WF-2.6.3 | 字符集选项 |
| WF-2.6.6 | 密码强度指示器 | WF-2.6.3 | 强度显示 |
| WF-2.6.7 | 排除相似字符选项 | WF-2.6.3 | 排除选项 |
| WF-2.6.8 | 编写测试 | WF-2.6.4 | 测试通过 |

#### 验收标准

- [ ] 参数可配置
- [ ] 实时生成
- [ ] 强度评估
- [ ] 一键复制

---

### 阶段 2 检查点

#### 质量标准

- [ ] 所有工具使用标准布局
- [ ] 所有工具有历史记录
- [ ] 所有工具有测试
- [ ] Biome lint 无警告

#### 交付物

- [ ] JWT 解码器
- [ ] 哈希生成器
- [ ] 二维码生成器
- [ ] 二维码阅读器
- [ ] UUID/GUID 工具
- [ ] 密码生成器

---

## 阶段 3：Web 格式工具（第 9-12 周）

### 目标

开发 5 个 Web 格式相关工具。

### 工具列表

| Sprint | 工具 | 依赖 | 周期 |
|-------|------|------|------|
| 3.1 | Markdown 编辑器 | marked, highlight.js | 第 9 周 |
| 3.2 | HTML 格式化器 | js-beautify | 第 9-10 周 |
| 3.3 | CSS 压缩/美化 | csso, clean-css | 第 10-11 周 |
| 3.4 | SCSS 编译器 | sass.js | 第 11 周 |
| 3.5 | SVG 优化器 | svgo | 第 11-12 周 |

### 每个工具的标准任务模板

#### 步骤 1：准备工作

1. 安装所需依赖
2. 创建工具目录结构
3. 创建 tool.meta.ts 元数据

#### 步骤 2：核心功能

1. 创建 index.tsx 使用 ToolLayout
2. 实现主要功能逻辑
3. 添加输入输出处理

#### 步骤 3：用户体验

1. 添加历史记录
2. 添加加载状态
3. 添加错误处理

#### 步骤 4：测试

1. 编写单元测试
2. 手动测试功能
3. 性能测试（大文件）

---

### Sprint 3.1：Markdown 编辑器（第 9 周）

#### 依赖安装

```bash
pnpm add marked highlight.js
pnpm add -D @types/marked
```

#### 功能需求

- [ ] 实时预览
- [ ] 语法高亮
- [ ] 导出 HTML
- [ ] 导出带样式的 HTML
- [ ] 支持 GFM（GitHub Flavored Markdown）
- [ ] 历史记录

---

### Sprint 3.2：HTML 格式化器（第 9-10 周）

#### 依赖安装

```bash
pnpm add js-beautify
pnpm add -D @types/js-beautify
```

#### 功能需求

- [ ] 美化 HTML
- [ ] 压缩 HTML
- [ ] 可配置缩进（空格/Tab）
- [ ] 可配置缩进大小
- [ ] 历史记录

---

### Sprint 3.3：CSS 工具（第 10-11 周）

#### 依赖安装

```bash
pnpm add csso clean-css
```

#### 功能需求

- [ ] CSS 美化
- [ ] CSS 压缩
- [ ] Autoprefixer 选项
- [ ] 可配置输出格式
- [ ] 历史记录

---

### Sprint 3.4：SCSS 编译器（第 11 周）

#### 依赖安装

```bash
pnpm add sass
```

#### 功能需求

- [ ] 编译 SCSS 到 CSS
- [ ] 显示变量预览
- [ ] 压缩输出选项
- [ ] 错误提示
- [ ] 历史记录

---

### Sprint 3.5：SVG 优化器（第 11-12 周）

#### 依赖安装

```bash
pnpm add svgo
```

#### 功能需求

- [ ] 删除元数据
- [ ] 压缩路径
- [ ] 移除隐藏元素
- [ ] 转换样式
- [ ] 显示优化前后对比
- [ ] 历史记录

---

## 阶段 4：数据格式工具（第 13-16 周）

### 目标

开发 5 个数据格式相关工具。

### 工具列表

| Sprint | 工具 | 依赖 | 周期 |
|-------|------|------|------|
| 4.1 | Cron 解析器 | cron-parser | 第 13 周 |
| 4.2 | YAML 转换器 | js-yaml | 第 13-14 周 |
| 4.3 | TOML 解析器 | toml | 第 14 周 |
| 4.4 | JSON Schema 验证器 | ajv | 第 14-15 周 |
| 4.5 | XML 格式化器 | fast-xml-parser | 第 15-16 周 |

---

### Sprint 4.1：Cron 解析器

#### 功能需求

- [ ] 解析 Cron 表达式
- [ ] 显示下次运行时间
- [ ] 显示运行时间列表
- [ ] 自然语言描述
- [ ] 历史记录

---

### Sprint 4.2：YAML 转换器

#### 功能需求

- [ ] YAML 转 JSON
- [ ] JSON 转 YAML
- [ ] YAML 验证
- [ ] 格式化 YAML
- [ ] 历史记录

---

### Sprint 4.3：TOML 解析器

#### 功能需求

- [ ] 解析 TOML
- [ ] TOML 转 JSON
- [ ] JSON 转 TOML（如支持）
- [ ] 验证格式
- [ ] 历史记录

---

### Sprint 4.4：JSON Schema 验证器

#### 功能需求

- [ ] 输入 JSON 和 Schema
- [ ] 验证 JSON
- [ ] 显示验证结果
- [ ] 显示错误路径
- [ ] 生成 Schema from JSON
- [ ] 历史记录

---

### Sprint 4.5：XML 格式化器

#### 功能需求

- [ ] 美化 XML
- [ ] 压缩 XML
- [ ] XML 转 JSON
- [ ] JSON 转 XML
- [ ] 历史记录

---

## 阶段 5：AI 集成（第 17-20 周）

### 目标

实现 AI 服务抽象层和 3 个 AI 工具。

### Sprint 5.1：AI 服务抽象层（第 17 周）

#### 任务清单

| ID | 任务 | 依赖 | 验收标准 |
|----|------|------|----------|
| WF-5.1.1 | 创建 lib/ai/provider.ts | WF-1.2.4 | AIProvider 接口 |
| WF-5.1.2 | 创建 lib/ai/openai.ts | WF-5.1.1 | OpenAI 实现 |
| WF-5.1.3 | 创建 lib/ai/anthropic.ts | WF-5.1.1 | Anthropic 实现 |
| WF-5.1.4 | 创建 lib/ai/custom.ts | WF-5.1.1 | 自定义端点实现 |
| WF-5.1.5 | 创建 lib/ai/index.ts | WF-5.1.2 | 统一导出 |
| WF-5.1.6 | 创建 hooks/useAI.ts | WF-5.1.5 | AI Hook |
| WF-5.1.7 | 创建 components/ai/AIProvider.tsx | WF-5.1.6 | AI 上下文 |
| WF-5.1.8 | 创建 components/ai/AISettings.tsx | WF-5.1.7 | 设置界面 |
| WF-5.1.9 | 更新 background.ts 处理 AI 请求 | WF-5.1.2 | 消息处理 |
| WF-5.1.10 | 编写测试 | WF-5.1.6 | 测试通过 |

#### 验收标准

- [ ] 支持 OpenAI API
- [ ] 支持 Anthropic API
- [ ] 支持自定义端点
- [ ] API 密钥加密存储
- [ ] 背景脚本处理请求

---

### Sprint 5.2：AI 设置页面（第 17-18 周）

#### 任务清单

| ID | 任务 | 验收标准 |
|----|------|----------|
| WF-5.2.1 | 创建 entrypoints/settings/ 目录 | 目录结构 |
| WF-5.2.2 | 创建 settings/index.html | HTML shell |
| WF-5.2.3 | 创建 settings/index.tsx | 设置界面 |
| WF-5.2.4 | API 密钥管理 | 添加/删除/验证 |
| WF-5.2.5 | 提供商选择 | 下拉选择 |
| WF-5.2.6 | 模型选择 | 模型列表 |
| WF-5.2.7 | 使用统计显示 | Token/成本 |

---

### Sprint 5.3：正则生成器（第 18-19 周）

#### 任务清单

| ID | 任务 | 验收标准 |
|----|------|----------|
| WF-5.3.1 | 创建 entrypoints/tools/regex-ai/ | 目录结构 |
| WF-5.3.2 | 创建 regex-ai/tool.meta.ts | 元数据 |
| WF-5.3.3 | 创建 regex-ai/index.tsx | 主组件 |
| WF-5.3.4 | 输入框（自然语言描述） | 文本输入 |
| WF-5.3.5 | AI 生成正则 | 调用 AI API |
| WF-5.3.6 | 正则测试功能 | 实时测试 |
| WF-5.3.7 | 解释正则含义 | AI 解释 |
| WF-5.3.8 | 常用正则库 | 预设列表 |

---

### Sprint 5.4：Cron 生成器（第 19 周）

#### 任务清单

| ID | 任务 | 验收标准 |
|----|------|----------|
| WF-5.4.1 | 创建 entrypoints/tools/cron-ai/ | 目录结构 |
| WF-5.4.2 | 创建 cron-ai/tool.meta.ts | 元数据 |
| WF-5.4.3 | 创建 cron-ai/index.tsx | 主组件 |
| WF-5.4.4 | 输入框（自然语言） | 文本输入 |
| WF-5.4.5 | AI 生成 Cron | 调用 AI API |
| WF-5.4.6 | 显示运行时间 | 解析结果 |
| WF-5.4.7 | 常用 Cron 模板 | 预设列表 |

---

### Sprint 5.5：JSON Schema 构建器（第 19-20 周）

#### 任务清单

| ID | 任务 | 验收标准 |
|----|------|----------|
| WF-5.5.1 | 创建 entrypoints/tools/json-schema-ai/ | 目录结构 |
| WF-5.5.2 | 创建 json-schema-ai/tool.meta.ts | 元数据 |
| WF-5.5.3 | 创建 json-schema-ai/index.tsx | 主组件 |
| WF-5.5.4 | 输入 JSON 示例 | 文本输入 |
| WF-5.5.5 | AI 生成 Schema | 调用 AI API |
| WF-5.5.6 | 编辑 Schema | 可编辑 |
| WF-5.5.7 | 验证 JSON against Schema | 验证功能 |

---

### 阶段 5 检查点

#### 质量标准

- [ ] AI API 调用正常
- [ ] API 密钥安全存储
- [ ] 错误处理完善
- [ ] 成本统计准确

#### 交付物

- [ ] AI 服务抽象层
- [ ] AI 设置页面
- [ ] 正则生成器
- [ ] Cron 生成器
- [ ] JSON Schema 构建器

---

## 阶段 6：开发体验（第 21-24 周）

### 目标

增强用户体验，添加搜索、收藏、快捷键等功能。

### Sprint 6.1：工具搜索（第 21 周）

#### 任务清单

| ID | 任务 | 验收标准 |
|----|------|----------|
| WF-6.1.1 | 在弹窗添加搜索框 | 搜索输入 |
| WF-6.1.2 | 实现实时搜索 | 输入过滤 |
| WF-6.1.3 | 支持按名称搜索 | 名称匹配 |
| WF-6.1.4 | 支持按标签搜索 | 标签匹配 |
| WF-6.1.5 | 键盘快捷键（Ctrl+K） | 快捷键 |

---

### Sprint 6.2：收藏夹（第 21-22 周）

#### 任务清单

| ID | 任务 | 验收标准 |
|----|------|----------|
| WF-6.2.1 | 添加收藏按钮 | 星标按钮 |
| WF-6.2.2 | 收藏夹显示区域 | 顶部显示 |
| WF-6.2.3 | 拖拽排序 | 拖拽功能 |
| WF-6.2.4 | 持久化收藏 | 存储到 chrome.storage |

---

### Sprint 6.3：键盘快捷键（第 22 周）

#### 任务清单

| ID | 任务 | 验收标准 |
|----|------|----------|
| WF-6.3.1 | 定义快捷键配置 | 配置文件 |
| WF-6.3.2 | 注册快捷键 | chrome.commands |
| WF-6.3.3 | 快捷键打开工具 | 功能实现 |
| WF-6.3.4 | 快捷键设置界面 | 可自定义 |

---

### Sprint 6.4：自定义主题（第 22-23 周）

#### 任务清单

| ID | 任务 | 验收标准 |
|----|------|----------|
| WF-6.4.1 | 定义主题变量 | CSS 变量 |
| WF-6.4.2 | 创建预设主题 | 多个主题 |
| WF-6.4.3 | 主题选择器 | 下拉选择 |
| WF-6.4.4 | 自定义主题编辑器 | 颜色选择 |

---

### Sprint 6.5：导出/导入设置（第 23 周）

#### 任务清单

| ID | 任务 | 验收标准 |
|----|------|----------|
| WF-6.5.1 | 导出设置功能 | JSON 文件 |
| WF-6.5.2 | 导入设置功能 | 文件上传 |
| WF-6.5.3 | 数据验证 | 验证导入 |
| WF-6.5.4 | 确认对话框 | 确认覆盖 |

---

### Sprint 6.6：工具组织（第 23-24 周）

#### 任务清单

| ID | 任务 | 验收标准 |
|----|------|----------|
| WF-6.6.1 | 自定义类别 | 创建类别 |
| WF-6.6.2 | 工具移动 | 拖拽移动 |
| WF-6.6.3 | 类别重命名 | 编辑功能 |
| WF-6.6.4 | 持久化组织 | 存储结构 |

---

## 质量保证流程

### 每个工具必须完成

1. **代码质量**
   - [ ] TypeScript 无类型错误
   - [ ] Biome lint 通过
   - [ ] 代码格式化

2. **测试**
   - [ ] 单元测试
   - [ ] 手动测试
   - [ ] 边界情况测试

3. **文档**
   - [ ] 工具元数据完整
   - [ ] 功能描述清晰
   - [ ] 使用说明（如需要）

4. **性能**
   - [ ] 加载时间 < 500ms
   - [ ] 大文件处理测试
   - [ ] 内存泄漏检查

---

## 风险管理

### 已识别风险

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| 依赖库更新 | 功能中断 | 锁定版本号 |
| Chrome API 变化 | 兼容性 | 跟进测试版 |
| AI API 不稳定 | 功能不可用 | 错误处理 + 重试 |
| 包大小膨胀 | 性能下降 | 代码分割 + 审计 |

---

## 下一步

**本文档状态：** 实施计划完成

**开始实施：**

1. **从阶段 1 开始** - 按顺序执行各 Sprint
2. **使用 `/sc:implement`** - 逐个任务执行
3. **每两周回顾** - 检查进度和质量
4. **持续集成** - 每次提交运行测试

**开始第一个任务：** Sprint 1.1 - 安装测试框架
